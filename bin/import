#! /usr/bin/env ruby

$: << File.absolute_path('./bin/lib')

require 'date'
require 'active_support/all'

require 'post_header'
require 'exhibition'

name, source = ARGV

unless name && source
  puts 'Usage: bin/import [name] [directory]'
  abort
end

time = Time.now
slug = "#{time.strftime('%Y-%m-%d')}-#{ActiveSupport::Inflector.parameterize(name)}"

header = PostHeader.new({
  name: name,
  time: time
})

exhibition = Exhibition.new({
  header: header,
  source: Dir.glob("#{source}/*.svg")
})

exhibition.write "_posts/#{slug}.html"
